EMI and Surcharge Implementation Guide

EMI Overview: Covers different types of EMI (Standard, Low Cost, No Cost) where customers can pay for products in monthly installments with varying interest rates, supported by banks, card issuers, or brands with static/dynamic plan configurations.
Surcharge System: Details how additional fees are calculated and applied to transactions based on configurable merchant rules, including payment method filters, percentage or fixed amounts, and customer notification through breakup screens.
Transaction Processing: Explains the technical implementation including EMI plan fetching via APIs, surcharge calculation logic in transaction flows, refund handling with configurable flags, and integration with various payment gateways like PayU, Razorpay, and CCAvenue.

video. Take it. Take it. very well. Uhhuh. That's one right. Anyway, from very Don't look. You got it. Yeah. Speech. Speech. So what is what is the use case of EMI? monthly likes. Other than that, if you money after the time after the time is you don't have to pay for something, you can take it to Starbucks. How many of I hope somebody would have typless that is okay. Come on something. Yeah. Come on. Keep coming. Guys, uh I have shared that session, right? It's been a long time I've shared that session. No one watched that. Anyone watch that?  Did that you would have seen that would have been clear by Sorry if they have watched that uh video session right that session it would have been clear why not process right posted on 23rd May. What's the point of these sessions if no one is watching all these things? Uh, do we have an answer for this? Germany. Germany part if you haven't watched anything then you'll start from the Oh my god. Let's continue the session. What is EMI? EMI stands for every month instruments. So you have taken you have taken some product and you you have to pay you don't have the money at current moment but you want the product so you'll have taken EMI on that product so EMI so you you are not paying up front you're saying I'll pay from next month with some interest okay there will be fixed interest rate okay you are paying next month with some amount like not the complete amount you'll pay some partial amount of whatever the total order amount there with some interest rate this can be up to some tenure there usually There may be 3 months tenure, 6 months tenure, 9 months tenure, 12 months tenure. It's depending upon the bank which is giving the tenure. Okay. So what is standard EMA? In standard EMA, what happens? You have amount and you also have an interest on top of that.  Yeah. Yeah. This is standard EMI where you'll have some like if you check our VTMI trans you can see here. Ignore this part for now. I'm taking an EMI for one IMA book. Okay. So if I check PGs like if you check the EMI just by EMI plans you can see here for standard EMI you can check what kind of EMI is this? This is standard EMI. Okay. In standard EMI which bank is giving you the EMI here Axis bank is giving me like Axis bank has EMI for this guy. If you check there what is the interest rate is g is g 14% interest rate. And you can check your tenure 6 months tenure. So for 6 months you'll be paying some amount. Total amount payable is 8,000 uh 86,312. In that interest you are paying is 3,470 rupees. You are paying interest in that monthly payable is 14,386 rupees. So your total amount is calculated on that interest amount is calculated in that divided that you'll get the monthly payment amount. Okay. This is standard. You'll get fixed tenure year fixed interest rate. And some bank will be giving the uh EMI for you. There are lot of banks which will give ANIX will give IC will be BAS will be there and there are different banks. Okay. Most of the bank supports standard EMI. They'll give this one. I can see right low cost EMI in low cost EMI also. Similar to no cost uh standard EMI itself here the half of the amount will be paid by uh merchant and half of the will be paid by yourself. So it will be interest rate will be reduced here like total interest rate you'll pay right it will be reduced here low cost EMI it's similar to standard but the interest rate what you are paying like interest what you will pay for product right it will be reduced per monthly whatever the EMI amount you'll pay that is reduced here because merchant is paying merchant or the product is paying off of the interest and you yourself is paying off of there. So this is low cost and okay what is no cost?  Sorry not why you won't have any interest. That is no cost. No cost. This is no cost. No cost EMI. No cost. I can't do no cost. No cost EMI. So no cost EMI of you can see right amount processing is zero. Bank interest rate is will be present. But who will pay this 15%. It is paid by merchant or the brand. Okay, suppose you're taking from uh in big billion days you uh in Amazon's big billion day you have seen right there will be some offer on iPhone or some products there will be like it uh the product amount will be more than one lakh but it will be selling around 80,000 there will be 20% discount like 20,000 discount on total product right  okay so you will sell more number of products there the total number of products sold will be more than whatever the total like we lost you will face right that will become comparably less. So merchant or the brand will be giving the discounts here. logo is uh solely for the purpose of just selling more products. More products because somebody like some offer you are running right to make your product sell more you're giving the discount on the product. How just facilitate ems for this? How our transaction works?  Okay. give examples for each test. We need to add some extra parameters in the TX but those parameters should be EMI and EMI 10. So right ideally when you let's say ideal scenario whenever the transaction request comes I'm fetching the EMI so first the merchant will fetch those EMI plans from the V2/ plans EMI two yeah we have two one is EMI/ EMI/ plans and V2/MI/ plans/ EMI/ plans means we will feting the latest EMI plans which are configured by the gateway call gateway to fetch the plans latest plan okay we do / EMI plans V2/ EMI plans we will configure inside DB  V2 V2 pay you pine laps will call P pay only uh pine pine they won't even support because they have their own configurator for EMI pine for almost static plans and dynamic static plans when you try to configure PG right in dashboard we have a model to en like configure the static plans there So that will fetch our DB and show the list of EMI plans present for that particular merchant gateway combination. So CC Avenue has EMI plan. Okay, you'll have 3 6 9 12 months EMI plan for some product. Based on that it will fi plan. So you need to give which bank is supporting that one in transaction. So you'll get to know right AI is supporting mean axis has this many 10 years. This is the interest rate. This is the amount should be paid. So if you pass those details in next AP means transaction AP. It will allow the transaction or it will be just pred if you are not able to pass these details.  Okay, you got it right. Similarly, no cost and it will ask what kind of EMI is this? Standard EMI, low cost EMI or no cost EMI. You'll pass EMI type in also transaction only for no cost you'll pass guess for others to you don't pass. What kind of transaction is that? uh EMI can be provided based on two things. One is card and one more is bank and other is brand. Three people can provide EMI here. Okay. You can see here if you try to buy something bank offer is 5%. You can see here right flip card access 5% cash back on flip card. So here They give easy payment options.  Yeah, you can see right no cost EMA starting at 21,000 324 per month. We details if you go HDFC provides no cost EMI plans. So here it can be debit or credit card. It's not saying which which card it's giving EMI on but it's bank based. Bank is providing the EMI here. Okay. Then There will be some other offers where on HDFC credit card or IC credit card there will be a EMI for them specific EMI. So that is card based uh EMI there that is and if you go for brands sometimes iPhone will give some uh offers right iPhone offers like those are also EMI offers. It's iPhone, Samsung other like all the mobile industry all will give those are brand based EMI. So these are different. So what is the difference between static and dynamic EMI? Means in static we'll fetch from EMI plans. There is a table called EMI plans. We'll manually enter those details. While configuring gateway, we'll take those details from merchant. We'll configure it and we'll store it in EMI plans. When you call  gateway will give to merchant, right? Merchant need to configure the gateway, right? That is fine. But ideally the plans will be okay. You'll add the plans in the merchant gateway account. It will store it in EMI plans. When you fetch it, you'll use it. But in V2I plan, will call find like those getters won't give the EMI plans they will ask call us we'll give the EMI plans directly to you in API response you need to display that API response and you should take the this one like EMI plan from there what else is the second one which you said We are no this uh dynamic and static  dynamic. So where we are specifying the EMI plans and giving it to PG will specify the plans. Okay. PG will specify and share that document with merchant. Okay. In static those based on the document we're creating gateway right you will add the plans. I'll show you. Yeah you can create it there. EMI what kind of EMI it is getting if standard EMI or no cost EMI interest rate if you're if you're choosing no cost EMI interest rate I don't think it will ask whatever you want okay So I created no cost for interest the customers are not paying right so this field is mandatory  that is actually that is a newly created model if the no cost is there your customer is not paying any either the mer yeah but it's not this is a newly created model you can see right at interest zero but this model is it should not be editable it should be showed because we are giving two options right standard and no cost. So it could be like when you keep on no cost it should be mutable it should not be yeah so if you proceed so you can see my generally won't show up so you can so I created a EMI just now like that you can create a standard static EMIs okay for that merchant. So if some like PG will share some credential which support only EMI flows okay suppose you have pineapp you are using right pineapp will give credentials which which will support EMI flow you just need to call that uh endpoint there they have their own separate end point actually this pine you can see here this is directly feting from and directly calling pineapp is giving me if I call through just this will be PGCMI uh PGCMI flow we'll take that and you'll reconstruct it into our EMI EMI plan response and you share too much This CMI is used in both uh PP and uh like reduction based merchant both both the We just one of our sandbox merchant was enabled by find CMI. So we can see right here my plans is called. So here two things are important. One is product ID and one more is amount. If those things are not matching it will give like empty plans or some four not ones. from our intern.  So where exactly this check like which to call that? The which page actually in the payments page will get this like it's at the start of the app itself it will call it won't like wait for the check out page right at the that time only the call will happen that will whenever you go to the check out page or some whatever the flipart or something there you will have whenever you go to section click on that question you will get some plan at that point the plan It's not like the board by default it will call in every PP page it will directly call you don't need to usually take it from this  okay any doubt in this testing very so what are the mandator uh see it's uh like individual you have different fields right for CCU you need tenure ID there for pineapp you need product ID and amount based on these fields only we can If you know the EMI plans well or EMI flow well, you can guess out the like what are the edge cases because it's not all common across all gateways. It will be specific for some if in CC if you not get any ID it will throw just predict directly. Uh similarly if you in pine labs for the product ID is there right if product ID and amount doesn't match pineabs won't give the proper uh EMI response it will give empty response like that there will be different edes for different uh gateways. It's not common here. Razer pay has also different plans there. Whatever the stand plans they configured right will give list of plans if same thing tenure ID it will check and some code they'll pass. If those code doesn't match it won't give any response there like that we'll f from Mi plan table right if those data won't match also it will give just client there anything else.  Okay. So here along with this EMI right how to do that you first call / EMI plans get the MIL/MI or V2 V2/ sorry V2 MI plans either one of the API will give you like depending upon which API are you calling any get which gives static plans like razor pay or which which will give dynamic plans like pay you or pay you or this one pine labs so we'll call the API we'll get the plans we'll pass those details into v2 uh /dx Let's go. So this we are fetching all the EMI plans configured in this merchant.  Uh then we will pass product ID. You can see right in order basket will pass something called product ID. Based on this product ID PG will give us response. What are the MA supported for this product ID and amount we are passing. How did you get this product? Merchant will get like he want to sell this product, right? He will share this those details with PG. So there you'll get the details there. So you'll pass this for pineups. You'll pass order basket. You'll get those details. For CCU, we don't pass product ID, right? I think three things merchant ID, order amount, and gateway reference ID.  Yeah. So reference ID will be that particular in that reference ID whatever plans we have. In near my plans table, we'll check for merchant account ID and merchant gateway account ID. In that value you configure in the plan right I showed configuring CC plan right that gateway whatever we configured it will have one ID in merchant gateway account. So for that gateway this CMI will be like now I configured only for that gateway that TMI plan whatever I configured will work for other gateway like gateway if you have multiple gateway or like same gateway consider multiple time also it won't work only for that particular gateway or with that particular refenc it will work you got it right so uh recently I went to buy a product where they were giving like offer on EMI and without EMI they were not giving offer with EMI they will get  like some cash back some cash back like that will be there like cash cash back it was not there it was like 5% off on SDFC card and you can I have the EMI oh that is interest 5% off I think it will be like total overall of PG will give some additional cash back like in the flow itself fin will give like there's one more product ID So finance will give additional cash back here. You can see here right you your rent like for that product the PG will give some like PG will get some cash back that cash back will be given by bank or merchant itself those that is the offer from like it will say we are giving this  particular bank or card yeah bank card or brand right from our end we don't configure this no figuring is from bank uh like from PG& or from merchand passing creating an order here I'm passing basket in order basket it contains some fields you can check here product ID and description some details will be passing here yeah for pups it's necessary it's up it's up to gate implement now they have They will validate the bas. So you can see right How this many I'll choose JP accents. So the transaction which will have this first transaction  we have which you show. So be like interesting in so this is the first transaction when you'll do the transaction right bank will pay will bank will pay for you and next all recurring you will pay to bank oh that's how EMI works no the first transaction like I'm asking this is first transaction right yeah in first transaction suppose you're taking 40,000 product means 40,000 will be credited to you from bank to pay And next every time you need to pay to bank in some EMIs we have like we need to pay for uh 3 months we need to pay at the very first moment only down  okay then that's a different thing that doesn't come under that is for like vehicles it is different down payment and then this EMI plan will come down payment is like for security from whatever the agency you're buying from right there they will ask for security purpose uh like you pay me this down payment then you can start on EMI there that will be for vehicle loans this is like smart electronic appliances or home appliances right once only I was electronics only and three months down payment  which product I don't know. I don't know like why I don't we don't see like down payments in for vehicle mostly. Yeah. Mostly for vehicle only. Yeah. It will be paid to you. You will pay to agency. Then you have to pay back to bank. Simple dude you want I give your card I'll do what you want product I give you bas on that's it but credit finance consumer finance is different not boss is there boss sage Handing on to Sri Shajo. Okay. Yeah. Okay. So, sage is nothing but a extra amount has to be paid uh paid by the customer as a check out fee or the what the gateway has extra amount fees for their particular transaction or some so that has to be paid by the customer. So that is What we are paying it as a search charge extra amount is correct. Uh more than the order amount uh you have to pay more than that. Okay, that is a search. You might have seen in some websites or something. Let's say uh  PG convenient fee these convenient fees are all be there right that is nothing but a search charge. Okay. So now for enabling a search charge basically we have a top level check. Okay, we have this uh config in the merchant account. Actually, I'm just presenting it. Sham if you're saying something I'm not able to hear you can you unmute Yeah. Uh, anyone there in the office? Hello. Can you hear me? Okay. Okay. service. Okay. So, now let me show you this. I'm audible. I'm audible, right?  Yes. Yes. Yes. Hello. Yeah. Hello. Uh yeah. Yeah, I can hear you. Yeah, sure. So we got to know how to uh set the enable the search charge right we now we have to uh to enable the search charge after to send a search charge amount we have to have some plans okay so here in this this is actual uh plans this is actually if you are a code based UI if you take you have to write a normal JSON code saying that if the payment method is uh partic payment method type is UPI and card is this or for payment method is visa or anything send search charge amount of this much person so it'll take the search charge amount e either you can send the exact amount let's say 5 rupees for every order or you can say that 5% of the particular order like that okay so that is a based on I if I have let me check this in other test Mind just we have everyone can see this rule right. So here we are sending the amount. Let's say if the it is card and it is a domestic card. We are adding a search charge rate of 1.236 and tax rate of 1.345. If that is not the card or debit card or uh card transactions you are adding this is editable. Whatever you want merchant wants to pass if it is 2 rupees, 3 rupees or whatever he wants to pass he will add that particular he will create a search logic first. Okay. And that logic has to get approved. So a merchant has the access to create the logic but that logic has to get approved from uh our side. If that logic gets approved then for uh that time onwards we will start sending the search amount for the every transaction based on this logic.  Huh? Why do we need to move? Because uh if they send the wrong logic that will you if the huh that flow will break and we don't even send the search amount logic has to be correct actually. So this is a code waste right now. We have made this with by the merger this whole whatever things are there that merger h wants uh we are not defining this we'll send them key this is the sample code this is a JSON code you can set whatever you want he will set that particular values and then he'll we will start sending those search rate it is actual search charge amount which we are sending let's say for 100 rupees I'm adding 1.1 or 2 rupees of transaction that is actually a search charge rate search charge amount okay tax rate is nothing but for that particular thing you are adding extra tax of 1.35 now 1.256 plus 1.345 this is around uh 3 rupees right now you are sending three uh three rupees extra if the to the gateway if the order amount is 100 we are sending 103 okay such  no that we whatever the tax rate which they this is not the government whatever the transaction we are facilitating through the g gateway that for 100 rupees or some uh whatever the transaction you're doing is adding this tax rate of 1.345 okay then nothing that is nothing that is another concept that will handled by only the merchant okay that That is a tax rate which is defined by the that is also additional fee that merchant will be defining. No no you you won't see that we will only see that uh search charge amount the whole thing in your uh whatever the transaction which got created and tax rate and all that will be defined in the search logic only you don't see that extra tax rate will be new param to be passed. Now you will see only three rupees uh order amount is 100 rupees and 1 three will be passed to the gateway.  Uhhuh. Correct. This this will be sum of these two amounts. If uh irrespective of order any order amount if you want order amount also he can specify this is based on the logic. Now for card he has defined like this right for wallet he can define something else also. Okay. So now it depends he can only pass for the search rate also. It is not sar tax rate is compulsory. It is not like that. Okay. It can be passed for uh specific card brands also. Huh? You can do anything that logic you is in the model. If whatever the how the logic you write it based on that you are passing down. Okay. Now the search we have calculated the search charge. We have enabled the search charge and we have added the plan also. This plan has to get approved. Whatever the plan you create. Let's see. I Create this back. Now for this just uh copy paste. We'll add this. This is one more thing. If you don't want to do it by a code wise, you can use this rule based way. You can and select whatever the field you want to based on the card issuer whatever you want you can select that this will actually create a that code wise logic only  just yeah it's an alternative you don't need to do anything you can just select any these uh whatever the logic you want to whether it's a card issue or whether it's a gateway whether it's a payment method type that you can select and the is condition and And then what are the country? This is based on country. And you can add some more also this and field. Okay. For this country, this gateway, this particular payment method type, this particular uh amount. These are all the logic you can define. Once the uh logic gets So if I go here so you can see this this rule is still pending right this rule is still pending. Someone has to approve this rule then only it'll get activated. Okay. Currently that particular rule is activated. Currently what we have seen this rule is active. Right? First one. So whatever the uh transaction you are doing the search charge amount will gets calculated based on this logic how the s amount will get calculated. Any idea you don't  inside the system we need to have something right. Huh? Correct. So this in which service it'll get calculated? Do you know the service? Which API? Basically. Okay. First correct. So now previously we have the API called API/M1/rule rule rule API. So that will was in the lambda service previously and that lambda service API service actually service it's in the lambda is a name space and a service. So there whatever the trans transaction amount how the calculation was happening is like you do a call at /txns call at that point of time I will create okay this is this thing and I have to calculate the uh sage amount while redirecting the gateway at that point of time I used to call from oiler I used to call uh lambda lambda will calculate the amount based on this logic whatever the logic which we have defined right based on this logic it will calculate the amount That amount will be uh transaction. Huh? In that is a normal amount only. You are not passing that extra 103. That amount will be calculated while we are redirecting or in the TXN currently uh AP TXN service only will calculate the search charge amount. No, no, no, no. That will be calculated based on this logic. That's what I'm saying. That will be calculated based on the logic which we have defined in the uh dashboard. Okay.  If it is not a redirection anything this guy before I'm sending what calling the gateway I'll define I mean like I'll add the sage amount if sage is doing. Huh? If the normal HS call also in the SL no in current before transaction you will call before initiating the transaction call you will calculate the search charge amount previously we used to have a outgoing call one outgoing call to lambda service lambda service used to calculate this guy uh search charge amount currently it is there in AP APX only right uh currently it is in APX only so whenever you call / txns I'll go if the I'll check the search flag is enabled or not if search flag will enabled I'll go and check the plan sorry logic whatever the logic is defined based on that what is the order amount I'll uh to that amount I'll add whatever the search amount which is there  okay so when we click on the past in that it is already huh that is such amount is calculated that is applied so how it will happen in the wallet flow like before uh doing a transaction only we will calculate right so you create order okay and order amount is 100 rupees I'm saying for wallet transaction let's say let's add five rupees of search sheet okay so before when you hit the tree at xn is called right before you get the response that that only these all the things internally get set these all the things internally get calculated what is the amount and what is the search rate for this sort of transactions and that will give you and then you get the tx is response. If there is a direct debit transaction then five or 106 rupees whatever is there right that will get debited  100 amount is there okay and now I see okay 100 amount fee is there and the user has added 100 rupees in this wallet so how will and if the search charge is applied then suppose the search charge amount is 02 so 1002 so how is that this whole process how will the user know that my search search I haven't you know added that 0.2 value in my wallet he won't add right he won't he doesn't have he doesn't have the balance only 2 rupees is less right you'll get a redirection URL or a topup URL based on the response extra for me it is the same way uh for just pay how it is uh seeing is like one or two rupees transaction based on the logic I'm seeing 10 2 rupees of transactions after calculating all the amount I'll check okay wallet amount is 100 rupees for me it is 100.22 rupees of transaction so obviously wallet doesn't have the enough balance I'll give you this uh redirection but mo most of the merchant doesn't use it for redirection only use it for redirection which we have seen as of now they doesn't use it for direct they can use it also okay So now this amount gets calculated everything. So now you have seen the search ads uh page also right  dashboard. Yeah not dashboard when you redirect a URL search charge and amount is after redirecting you used to redirect to a gateway page correct or your bank page. If the search charge is there uh we have a I'm saying payment page breakup page. So you asked right how the user will get to know the 100.2 rupees gets added for that we have a sage breakup breakup screen screen. Yeah. So that will be there that merchant can enable in his settings. Uh uh see here we have the screen right? Show search charge breakup screen. Okay this will Show the just spaces uh breakup screen. What is the order amount and what is the search charge rate which got added to the particular transactions 100 plus rupees or 1 rupee 2 rupee whatever the based on the logic. Okay. Now that breakup screen will tell you what is the breakups have been happened. What is the original amount? What is the net amount calculated? Okay.  Huh. What if based on search charge tax uh and search charge amount this breakups will be there? What is the order amount actual order amount? What is the search charge amount which got added everything? Then we have the confirm and pay button where it is enabled for just enabled. It disabled it for the sandbox. I don't have AP you create one transaction and redirect. That's all. We'll show the search as breakup screen also. So until now any confusion any questions? You got to know how the search charge calculation happens? How the search charge gets enabled?  Huh? That depends that merchant can add it as a additional account fee for the part. particular product or gateway might be asking him to pay some fees that he merchant is uh uh taking giving that load to the customer only customer has to pay that depends what will happen okay sure no problem hello yeah sorry uh what will happen in the cases of gift card and that transactions when search charge is enabled gift card transaction that time also will for gift card transaction also I'm seeing just an amount okay gift card transaction I can  I can decide the logic I can decide the logic okay merchant can decide the logic right if he's en enabling the merchant is enabling the logic for gift card also merchant is enabling for normal transaction that dep completely depend on the merchant how they are configuring the logic that is fine but everything like when I was doing a gift card transaction and when searches were enabled the transaction was getting failed so can can there be some specific reason or it must be because it's not enabled at some is not enabled it's not enabled for gift cards  so gift card support but gift card support right now currently we don't have but just as of now not supporting but razor supports okay okay so whatever the gift card transaction you do also they can have the check but that that gift card is given by the merchant only right how why merchant will enable that yeah correct so additional fee that has to be taken by the merchant Is it uh where the PG is saying that to pay these these much amount and the merchant is saying enabling the customer to pay the that particular amount right the whatever the extra amount he's saying or else the merchant is saying this is the check out fee I'm adding to you for your particular order if the merchant is enabled ideally he doesn't enable it for uh gift cards correct the in that Share the screenshot.  You are in the meeting also. You share the screenshots. You can see this right? Such as breakup. This is such as breakup screen. So this is the order amount. Order amount is 5 rupees and search as value we are adding it is 07. H if the merchant is enabled ask to show you. will show the screen. Gateways that depends on the gateway. If they have a breakup screen, they'll show it. Ideally, the all the information will be available on the merchants's page only. Okay. Merchant will say key this is the uh convenient fees of some 2 rupees or 1 rupees and uh order amount original amount is this much and the total amount you have to pay is this much. So if the merchant enables this page and we are saying the uh showing this particular screen with the breakups. Okay. Razer pay have their own check out page. I think payu also has their own search uh page. If they have enabled for that particular merchant they'll we will show that particular screen redirect to that screen as the gateway.  Don't want to show this breakup screen then we can uh can show breakup uh that flag. If we dis that and then we don't see the screen. This screen we don't see. If you do that is the breakup happened. Whatever the breakup this way the end user will get to know key we are I am paying the how much amount I am paying and what is the tax amount which the merchant is uh giving merchant is charging. Okay. So now this is searcher and transaction will go through normally that is a normal flow only whatever the gateway decide gateway will happen uh everything will happen and that we'll get the end response from the gateway so now once the response success with the successful transaction do  I don't have a That's okay. I need order status response. So uh while we are doing this search charge related transaction in order status can we see that h order status we will have that information I'll show you that order status also. Okay. See you can see the screen right? So here this copy this. So now Here I'm seeing that net amount as 5 rupees, search charge amount is 7 and effective amount uh transaction amount is 5.07 and effective amount also 5.07 okay that we uh that is the amount which we have made the transaction for. Okay so now this is the transaction part and we'll come for the refund. What do you think the refund in the refund should happen either merchant should get uh sorry user customer should get complete amount refund 5.07 or you think only 5 rupees he should get  why I paid for 5.07 right then for refund also we have this charge amount flag So here we have this include search charge amount in treatment. You can see this flag right these are all in the merchant account only and you can see this in the dashboard. Enable or disable this in the dashboard. If you enable this flag we can get complete amount of refund that is 5.07. If we disable this flag we are only taking the net amount for the refund consider. ation that is 5 rupees based on the merchant. If they want to enable it, he can enable it. If you want to disable it, he can disable it. That completely on the merchant side. Okay, this is the refund part. So whenever you test a charger, right, you have to refund also you need to check with these things.  Huh? So this same thing in the auto refund Case also if this flag is enabled the complete amount will get refunded. If the flag is not enabled the normal net amount will get refunded that is 5 rupees or something. Okay initiated initiate terminates. Uh this is a new flag which we have this for uh you know cash payment method right? Cash gateway for that they have only supports CO cash on delivery payment method. Uh in that case how save in that case we don't they don't add it currently CO also not cod will just create a transaction when you hit class TX you will get CO initiated that's all you don't get anything it is like cash on delivery so user will  case search will not be it H it doesn't even cash doesn't have anything only nothing cash is empty thing so this is for newly uh added flag if this flag is enabled for cood initiated transaction cood initiated is terminal state you don't allow to create another transaction for the same order enable search charge this flag which we have showed in the merchant account right that first flag should add search as amount. This will update that particular flag in the merchant account table. And this is for show such as breakup screen. And this is for uh include search as in the Okay. Now you have to enable the um breakdown.  So if I enable and if some are doing same transaction the same gateway so for them also merchant twice okay specific you can never password then all the transactions any gate irrespective of gateway all the transaction will go through the search that is based on the logic gateway also I can decide only for pay you gateway you add a charge amount only for reser pay you can add search amount that is dec decided based on the logic completely okay any doubt and only uh this is like you don't need to write the code actually.  So it'll actually internally convert the whatever the options you select in the dropdowns it'll automatically convert into it into the code. So this will waste So here whatever you uh added that will internally get converted into code that's all GST status uh that put by the merchant. So let's say a merchant has any he can configure anything. So merchant will say I'll bear bear the GST status of this particular product he can bear it. If he doesn't want everything customer has to pay means he will add the GST amount also whatever he wants. We let that also add it based on the calculation based on the percent right you are showing the tax so the tax is different the GST is different  huh so GST is like that is also percent by see here that you can consider it as a flat fee kind of a thing such as uh Uh okay. So and this uh GST and CGST SGST is like the normal tax rate which ideally the customer has to bear it right that will be decided by the merchant how much percentage for his uh particular product or based on his uh uh category of selling the product correct so if he's some someone like ecart or something they you have to pay 18 20% of the GST. Now the other thing we have a less uh GST tax rate, right? That is based on this thing. He'll configure that in the rule itself. If he doesn't add it in the rule, then he will mention that separately. He will add that the particular order amount and send to just pay and uh just pay will calculate before doing the transaction. We will calculate based on the logic whatever the thing we will calculate it and we will send it to the gateway. some e-cart misho and all right most of the time they won't explicitly mention the tax rate let's say if your product price is 40 they will uh show it 45 rupees that is including the GST charges it is left to them if I he's adding this way then he might be showing the original price on the website and uh while doing the transaction you have to add the tax amount whatever percentage he has defined here. So this will internally convert it into code. Then you can uh the such transaction will happen based on this logic whatever you have defined.  So please So if you want to see if he doesn't mention any brand then all the uh card transactions credit or debit he he can mention credit or debit all those sort of cards will go via sa zombie If it doesn't mention he mentions some brand network brands. So Visa or Mastercard. So only for Mastercard uh that particular brand we will go via search otherwise we don't apply any search so here you can see card and this and I can go and create we have done it again is debit so now credit and debit both will go by  yes okay so if dashboard only. So when we are listing it is better to check both the role and code right or both merchant will use this dashboard only that is so merchant so we have to check from both right or any one of no if that is enabled he will I can show you I don't know who is using search let me show you one how the merchant what what the merchant has configured in production testing. So both works that both works internally as a logic. So any one of it any one of it is fine.  This logic is like kind of a UI based dashboard based that is not for back end. So you can check normal if you configure the correct role via code based and if you check via that also that is also fine. If you only configure role based and Please acquire that that is also fine. You can do anything. Huh? Uhhuh. You can give that percentage also. You can give uh in the rate format you can specify that if you pass a charge amount you that is a static amount. Let's say 5 rupees, 3 rupees that kind of thing. If You pass saying rate is nothing but a percent 1%. That means 100 rupees 1% means one rupee you are paying.  Yeah it is like both we can give any value just code based and rupees as you told Java format Java format we are giving it is UI based but this h you don't need to have actually have a coding knowledge Java will give you some error. You don't know where someone who is configuring if he doesn't know some error. If he doesn't want to identify then you can use this guy based developers use a Java code and you can show a code if you have you can use code anything you can get anything you can Huh that syntax should be  uh uh this code actually this is handwritten this logic you are seeing here right this is actually handwritten logic this is saying if the method is not equal to undefined and HDFC or ICIC if these are not then search charge rate is 3% otherwise uh tax rate is 18% otherwise 1.1% and uh 18% of tax. These are all based on the Java syntax only. If you want to add it, you have to add it in this code and you have to configure the logic the logic whatever he wants that he merchant has to specify.  You are adding it. But ideally production the merchant will set it. Okay. Any doubts, questions. No. We have a formula for effective amount right but TX and amount is like the all TX amount is TX amount but effective amount is different right ideally most of the cases effective amount is same TX amount effective amount will be same and effective amount let's say  in office it will get changed yes and in uh some uh in office only it will get changed the difference you will get let's say if you are passing some five rupees some uh even search charge it will change so when when I was testing it in some cases I can see the difference between tx mostly tx amount and effect amount will be same in some cases like one point will be huh that we have added the actually round of logic we have inside uh Search whatever the search as calculation will be there right the not with the roundup itself in in even in the order status we are displaying right in that itself what if we okay if it changes based on offers what if we enabled when we are passing offer ID and we are enabled search  uh we will calcate uh the normal order amount based on that uh we'll give the is called first offer will be applied. Offer applied no uh order amount on top of that uh offer offer applied then the search charge addition search charge amount doesn't come for offers only I mean like he will say key whatever the amount you will give me for that I'm adding this this much amount of uh fee won't be he wills Consider the order amount only. Searchers also give you the consider the order amount only. Five rupees 100 rupees means let's say 1% of tax we are adding. So 101 rupees only uh actually one rupee right now the search charge amount is one rupee. Offers he will deduct based on the offer logic. Let's say for offer 10 rupees of discount. Now 90 + 1 91 rupees  that will bas to be based on the order amount because offer also got deducted based on the order amount only. S also calculated based on the order amount only sum of those to 91 rupees. Okay. This is not a gateway. How much invoice? No see whatever let's say merchant has some only two payment methods pay and something he'll mention you pay and something and uh card okay he'll mention those two for this add the search charge amounts okay so now whatever the transaction for that particular merger it will add go via search only you will add the search charge amount  payment that depends on the merchant that's what I'm saying that depends on the merchant if the merchant wants go only specified payment methods only up you pay wants to go via search charge he can enable add that in the code if he doesn't want okay I want to uh enable all payment methods via searchcharge then he can enable he doesn't even mention the filter only he'll just add the search rate at that point of time So all the transaction via any meth pay payment method will go via s only. It is only for specific merchant right for this merchant let's say aert test  uh that is that is what I am saying that is depends on the logic how you have written currently if you see this logic right whatever the logic we have mentioned payment method not equal to undefined and payment method equal to sdfc or icic Okay, if this is there then he is applying the search charge rate of 3% and uh 18% tax rate correct. This is only applicable for HDFC and ICIC I mean or ICIC only both these two if you come for this card walla also the card we have defined like only these card bins whatever the card bins we have mentioned right uh only these card bins If I get a transaction call only this uh transaction if I clear all this that will go via search. If I clear all this and if I say is car transaction all the card trans card transaction irrespective of any bin it will go via search charge. H uh that depends on everything depends on the logic how the merchant defines it. effective amount ideally the amount which we are stored I mean like end amount what we get for the uh order right so refund whatever happens also that based on the effective amount only whatever the refund we are doing right that is also based on the effective amount only so let's say but also  no it doesn't It doesn't include the net amount we have that is the current order amount and uh after that huh and then the transaction amount is the whatever the deducted amount or the uh final amount uh that will be there that making the transaction call so that is the transaction amount. So then the refund uh will be calculated based on the effect. If the effective amount is like 100 rupees I'll do a I can do 100 rupees of refund. If that is not there then uh with I mean like 100 rupees of refund if that is lesser than whatever the effective amount is I can use the refund for that particular amount of access. So currently in production and all people investing or anyone will approve we'll take the ID ideally uh s will plans will get added based on the ID we can approve any other questions I'm not question.  Yeah, bro. Okay, we can close the session now. Oh yeah, we can close this now. How many things are left now based on what they have to
This transcript covers the discussion about EMI (Equated Monthly Installments) and Search Charge functionality, including definitions, types of EMI (standard, low cost, no cost), who provides EMI (bank, card, brand), static vs. dynamic EMI plans, how EMI plans are fetched and used in transactions, the calculation and application of search charges, different ways to configure search charge logic (code-based and rule-based), how search charge affects transaction amounts and wallet flows, the display of search charge breakups to the user, how search charge is handled in refunds, and how search charge interacts with offers and taxes like GST.
